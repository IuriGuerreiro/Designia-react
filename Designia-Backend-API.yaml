openapi: 3.0.3
info:
  title: Designia Backend API
  version: 1.0.0
  description: API documentation for Designia marketplace platform
paths:
  /api/activity/history/:
    get:
      operationId: activity_history_retrieve
      description: Get activity history for the authenticated user.
      tags:
      - activity
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          description: No response body
  /api/activity/stats/{product_id}/:
    get:
      operationId: activity_stats_retrieve
      description: Get activity statistics for a specific product.
      parameters:
      - in: path
        name: product_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - activity
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          description: No response body
  /api/activity/track/:
    post:
      operationId: activity_track_create
      description: |-
        Track user activity on products.

        Expected payload:
        {
            "product_id": "uuid",
            "action": "view|click|favorite|unfavorite|cart_add|cart_remove"
        }
      tags:
      - activity
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/ar/downloads/:
    get:
      operationId: ar_downloads_list
      description: |-
        CRUD operations for tracking the models a user has downloaded.
        Users only see and manage their own download records.
      tags:
      - ar
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductARModelDownload'
          description: ''
    post:
      operationId: ar_downloads_create
      description: |-
        CRUD operations for tracking the models a user has downloaded.
        Users only see and manage their own download records.
      tags:
      - ar
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductARModelDownloadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductARModelDownloadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductARModelDownloadRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductARModelDownload'
          description: ''
  /api/ar/downloads/{id}/:
    get:
      operationId: ar_downloads_retrieve
      description: |-
        CRUD operations for tracking the models a user has downloaded.
        Users only see and manage their own download records.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - ar
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductARModelDownload'
          description: ''
    put:
      operationId: ar_downloads_update
      description: |-
        CRUD operations for tracking the models a user has downloaded.
        Users only see and manage their own download records.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - ar
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductARModelDownloadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductARModelDownloadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductARModelDownloadRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductARModelDownload'
          description: ''
    patch:
      operationId: ar_downloads_partial_update
      description: |-
        CRUD operations for tracking the models a user has downloaded.
        Users only see and manage their own download records.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - ar
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProductARModelDownloadRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProductARModelDownloadRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProductARModelDownloadRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductARModelDownload'
          description: ''
    delete:
      operationId: ar_downloads_destroy
      description: |-
        CRUD operations for tracking the models a user has downloaded.
        Users only see and manage their own download records.
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - ar
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/ar/models/:
    post:
      operationId: ar_models_create
      description: Upload or replace a product's 3D model.
      tags:
      - ar
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductARModel'
          description: ''
  /api/ar/models/{id}/:
    get:
      operationId: ar_models_retrieve
      description: Get metadata for a product's 3D model using the product UUID as
        lookup.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Product 3D Model.
        required: true
      tags:
      - ar
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductARModel'
          description: ''
  /api/ar/models/{id}/download-link/:
    get:
      operationId: ar_models_download_link_retrieve
      description: Generate a fresh presigned download link for the product's 3D model.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Product 3D Model.
        required: true
      tags:
      - ar
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductARModel'
          description: ''
  /api/ar/models/catalog/:
    get:
      operationId: ar_models_catalog_retrieve
      description: Return catalog of products with AR models for admin/AR tooling.
      tags:
      - ar
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductARModel'
          description: ''
  /api/auth/2fa/disable/:
    post:
      operationId: auth_disable_2fa
      description: "\n        **Step 2 of Disable Flow:** Deactivate 2FA.\n\n    \
        \    Verifies the code received from `send-code` endpoint to ensure security.\n\
        \        If successful, **Two-Factor Authentication will be turned OFF**.\n\
        \        "
      summary: Disable 2FA
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TwoFactorConfirmRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TwoFactorConfirmRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TwoFactorConfirmRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: 2FA disabled successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid code
  /api/auth/2fa/enable/:
    post:
      operationId: auth_enable_2fa
      description: "\n        **Step 2 of Enable Flow:** Finalize 2FA setup.\n\n \
        \       Verifies the code received from `send-code` endpoint.\n        If\
        \ successful, **Two-Factor Authentication will be activated** for this account.\n\
        \        Future logins will require a verification code.\n        "
      summary: Enable 2FA
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TwoFactorConfirmRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TwoFactorConfirmRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TwoFactorConfirmRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: 2FA enabled successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid code
  /api/auth/2fa/send-code/:
    post:
      operationId: auth_send_2fa_code
      description: "\n        **Step 1 of 2FA Workflow:** Initiate 2FA setup or removal.\n\
        \n        Sends a 6-digit verification code to the user's email address.\n\
        \        This code is required to confirm the subsequent 'enable' or 'disable'\
        \ action.\n\n        **Purposes:**\n        - `enable_2fa`: Request code to\
        \ turn ON 2FA (verifies you can receive codes)\n        - `disable_2fa`: Request\
        \ code to turn OFF 2FA (security check)\n        "
      summary: Send 2FA code
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TwoFactorCodeRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TwoFactorCodeRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TwoFactorCodeRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: Code sent successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid purpose or rate limited
  /api/auth/account/status/:
    get:
      operationId: auth_account_status
      description: "\n        Get detailed status of your account including email\
        \ verification and activation status.\n\n        **Protected:** Requires JWT\
        \ authentication.\n\n        **Returns:**\n        - Account activation status\n\
        \        - Email verification status\n        - Whether user can login\n \
        \       - 2FA status\n        - User role\n        - Account creation date\n\
        \n        **Use Cases:**\n        - Frontend: Check if user needs to verify\
        \ email\n        - Frontend: Show activation status in profile\n        -\
        \ Mobile: Determine if user can access protected features\n        "
      summary: Check account activation status
      tags:
      - Authentication
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountStatusResponse'
              examples:
                VerifiedAccount:
                  value:
                    is_active: true
                    is_email_verified: true
                    email: user@example.com
                    can_login: true
                    two_factor_enabled: false
                    role: customer
                    account_created: '2025-01-15T10:30:00Z'
                  summary: Verified Account
                UnverifiedAccount:
                  value:
                    is_active: false
                    is_email_verified: false
                    email: newuser@example.com
                    can_login: false
                    two_factor_enabled: false
                    role: customer
                    account_created: '2025-01-20T14:22:00Z'
                  summary: Unverified Account
                VerifiedSellerWith2FA:
                  value:
                    is_active: true
                    is_email_verified: true
                    email: seller@example.com
                    can_login: true
                    two_factor_enabled: true
                    role: seller
                    account_created: '2024-12-01T08:15:00Z'
                  summary: Verified Seller with 2FA
          description: Account status retrieved
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Unauthorized - no valid JWT token provided
  /api/auth/admin/seller/applications/{id}/:
    post:
      operationId: seller_application_admin_action
      description: "\n        Admin action to approve or reject a seller application.\n\
        \n        **Actions:**\n        - `approve` - Approve application and upgrade\
        \ user to seller role\n        - `reject` - Reject application with reason\
        \ (user can resubmit)\n\n        **On Approval:**\n        - User role changed\
        \ to \"seller\"\n        - User profile marked as verified seller\n      \
        \  - Email notification sent (if configured)\n\n        **On Rejection:**\n\
        \        - User can view rejection reason\n        - User can resubmit improved\
        \ application\n        "
      summary: Approve or reject seller application (Admin only)
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - Seller Applications (Admin)
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SellerApplicationAdminActionRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SellerApplicationAdminActionRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SellerApplicationAdminActionRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerApplicationAdminActionResponse'
              examples:
                ApprovalSuccess:
                  value:
                    message: Seller application approved
                    user_id: 123e4567-e89b-12d3-a456-426614174000
                    user_email: seller@example.com
                  summary: Approval Success
                RejectionSuccess:
                  value:
                    message: Seller application rejected
                    user_id: 123e4567-e89b-12d3-a456-426614174000
                    user_email: seller@example.com
                  summary: Rejection Success
          description: Action completed successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid action or application not found
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Not authorized (admin only)
  /api/auth/google/login/:
    post:
      operationId: auth_google_login
      description: "\n        Authenticate using Google OAuth token.\n\n        **Flow:**\n\
        \        1. Frontend gets Google OAuth token using Google Sign-In\n      \
        \  2. Frontend sends token to this endpoint\n        3. Backend verifies token\
        \ with Google\n        4. Returns JWT tokens for Designia\n\n        **Note:**\
        \ Creates new account automatically if user doesn't exist.\n        "
      summary: Login with Google OAuth
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GoogleLoginRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/GoogleLoginRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/GoogleLoginRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
          description: Google login successful
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid Google token
  /api/auth/login/:
    post:
      operationId: auth_login
      description: "\n        Authenticate user with email and password.\n\n     \
        \   **Flow:**\n        1. If user has 2FA disabled → Returns JWT tokens immediately\n\
        \        2. If user has 2FA enabled → Returns `requires_2fa: true` with user_id\
        \ for verification\n\n        **Rate Limiting:** 5 requests/minute per IP\
        \ (if Kong Gateway enabled)\n        "
      summary: Login with email and password
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/LoginRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/LoginRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
              examples:
                SuccessfulLogin:
                  value:
                    message: Login successful
                    access: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                    refresh: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                    user:
                      id: 123e4567-e89b-12d3-a456-426614174000
                      email: user@example.com
                      username: johndoe
                      role: customer
                  summary: Successful Login
          description: Login successful (no 2FA required)
        '202':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Login2FAResponse'
              examples:
                2FARequired:
                  value:
                    requires_2fa: true
                    message: 2FA code sent to your email
                    user_id: 123e4567-e89b-12d3-a456-426614174000
                    code_already_sent: false
                  summary: 2FA Required
          description: 2FA verification required
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid credentials
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Email not verified or account disabled
  /api/auth/login/verify-2fa/:
    post:
      operationId: auth_2fa_verify_login
      description: "\n        Complete login by verifying 2FA code sent to email.\n\
        \n        **Flow:**\n        1. User logs in with email/password\n       \
        \ 2. If 2FA enabled, receives user_id and message to check email\n       \
        \ 3. User receives 6-digit code via email\n        4. User submits code to\
        \ this endpoint\n        5. Returns JWT tokens on success\n\n        **Code\
        \ Validity:** Codes expire after 10 minutes.\n        "
      summary: Verify 2FA code during login
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TwoFactorVerifyRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TwoFactorVerifyRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TwoFactorVerifyRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
          description: 2FA verified, login successful
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid or expired code
  /api/auth/profile/:
    get:
      operationId: profile_get_own
      description: "\n        Retrieve your own complete user and profile information.\n\
        \n        **Includes:**\n        - User fields (username, email, first_name,\
        \ last_name, role, etc.)\n        - All profile fields\n        - Profile\
        \ completion percentage\n        - Private fields (phone, email preferences,\
        \ etc.)\n        "
      summary: Get own profile
      tags:
      - Profile
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: User profile retrieved
    patch:
      operationId: profile_update
      description: "\n        Update your profile information.\n\n        **Restricted\
        \ Fields (Verified Sellers/Admins only):**\n        - phone_number, country_code\n\
        \        - website, location\n        - job_title, company\n        - account_type\n\
        \        - Social media URLs (instagram, facebook, twitter, linkedin, pinterest,\
        \ tiktok)\n\n        **Public Fields (Anyone):**\n        - bio\n        -\
        \ avatar (via separate upload endpoint)\n\n        **Returns:**\n        -\
        \ Updated profile with new completion percentage\n        - Profile completion\
        \ ranges from 0-100%\n        "
      summary: Update own profile
      tags:
      - Profile
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProfileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProfileRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProfileRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
          description: Profile updated successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                PermissionDenied:
                  value:
                    error: You do not have permission to update restricted profile
                      fields
                    details:
                      restricted_fields:
                      - phone_number
                      - website
                  summary: Permission Denied
          description: Validation error or permission denied for restricted fields
  /api/auth/profile/picture/delete/:
    post:
      operationId: profile_picture_upload
      description: "\n        Upload a new profile picture.\n\n        **Requirements:**\n\
        \        - Max file size: 10MB\n        - Allowed formats: JPG, PNG, WebP\n\
        \        - Automatically replaces old profile picture\n\n        **Storage:**\n\
        \        - Uploaded to S3/MinIO\n        - Returns presigned URL (valid for\
        \ 1 hour)\n        - Permanent URL stored in profile\n\n        **Rate Limiting:**\
        \ 60 requests/minute\n        "
      summary: Upload profile picture
      tags:
      - Profile
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Image file (JPG, PNG, or WebP)
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfilePictureUploadResponse'
              examples:
                SuccessfulUpload:
                  value:
                    message: Profile picture uploaded successfully
                    profile_picture_url: profile-pictures/123e4567/profile.jpg
                    profile_picture_temp_url: https://s3.amazonaws.com/designia/profile-pictures/123e4567/profile.jpg?signature=...
                    size: 245678
                    content_type: image/jpeg
                  summary: Successful Upload
          description: Profile picture uploaded successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Validation error (file too large, wrong format, etc.)
    delete:
      operationId: profile_picture_delete
      description: "\n        Remove your profile picture.\n\n        **Effect:**\n\
        \        - Deletes image from S3/MinIO storage\n        - Clears profile_picture_url\
        \ field\n        - Profile reverts to default avatar\n        "
      summary: Delete profile picture
      tags:
      - Profile
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfilePictureDeleteResponse'
          description: Profile picture deleted successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: No profile picture to delete or deletion failed
  /api/auth/profile/picture/upload/:
    post:
      operationId: profile_picture_upload_2
      description: "\n        Upload a new profile picture.\n\n        **Requirements:**\n\
        \        - Max file size: 10MB\n        - Allowed formats: JPG, PNG, WebP\n\
        \        - Automatically replaces old profile picture\n\n        **Storage:**\n\
        \        - Uploaded to S3/MinIO\n        - Returns presigned URL (valid for\
        \ 1 hour)\n        - Permanent URL stored in profile\n\n        **Rate Limiting:**\
        \ 60 requests/minute\n        "
      summary: Upload profile picture
      tags:
      - Profile
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Image file (JPG, PNG, or WebP)
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfilePictureUploadResponse'
              examples:
                SuccessfulUpload:
                  value:
                    message: Profile picture uploaded successfully
                    profile_picture_url: profile-pictures/123e4567/profile.jpg
                    profile_picture_temp_url: https://s3.amazonaws.com/designia/profile-pictures/123e4567/profile.jpg?signature=...
                    size: 245678
                    content_type: image/jpeg
                  summary: Successful Upload
          description: Profile picture uploaded successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Validation error (file too large, wrong format, etc.)
    delete:
      operationId: profile_picture_delete_2
      description: "\n        Remove your profile picture.\n\n        **Effect:**\n\
        \        - Deletes image from S3/MinIO storage\n        - Clears profile_picture_url\
        \ field\n        - Profile reverts to default avatar\n        "
      summary: Delete profile picture
      tags:
      - Profile
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfilePictureDeleteResponse'
          description: Profile picture deleted successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: No profile picture to delete or deletion failed
  /api/auth/register/:
    post:
      operationId: auth_register
      description: "\n        Create a new user account and send email verification.\n\
        \n        **Flow:**\n        1. User submits registration form\n        2.\
        \ Account created (inactive until email verified)\n        3. Verification\
        \ email sent\n        4. User must verify email before logging in\n\n    \
        \    **Rate Limiting:** 3 requests/minute per IP (if Kong Gateway enabled)\n\
        \        "
      summary: Register new user account
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/UserRegistrationRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterResponse'
              examples:
                SuccessfulRegistration:
                  value:
                    message: Registration successful. Please check your email to verify
                      your account.
                    user:
                      id: 123e4567-e89b-12d3-a456-426614174000
                      email: newuser@example.com
                      username: newuser
                      is_email_verified: false
                  summary: Successful Registration
          description: Registration successful
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Validation error (email exists, passwords don't match, etc.)
  /api/auth/resend-verification/:
    post:
      operationId: auth_resend_verification
      description: "\n        Resend email verification link.\n\n        **Rate Limiting:**\
        \ Can only send every 60 seconds per email.\n\n        **Security Note:**\
        \ Returns success even if email doesn't exist (prevents enumeration).\n  \
        \      "
      summary: Resend verification email
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResendVerificationRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ResendVerificationRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ResendVerificationRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResendVerificationResponse'
          description: Verification email sent (or email already verified)
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Email already verified
        '429':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Rate limited - too many requests
  /api/auth/seller/application/status/:
    get:
      operationId: seller_application_status
      description: "\n        Check the status of your seller application.\n\n   \
        \     **Possible Statuses:**\n        - `none` - No application submitted\n\
        \        - `pending` - Application under review\n        - `approved` - Application\
        \ approved (user is now seller)\n        - `rejected` - Application rejected\
        \ (can resubmit)\n        "
      summary: Get seller application status
      tags:
      - Seller Applications
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerApplicationStatusResponse'
              examples:
                PendingApplication:
                  value:
                    has_application: true
                    is_seller: false
                    status: pending
                    application_id: 42
                    submitted_at: '2025-01-15T10:30:00Z'
                    admin_notes: null
                    rejection_reason: null
                  summary: Pending Application
                ApprovedApplication:
                  value:
                    has_application: true
                    is_seller: true
                    status: approved
                    application_id: 42
                    submitted_at: '2025-01-15T10:30:00Z'
                    admin_notes: Great portfolio!
                    rejection_reason: null
                  summary: Approved Application
                RejectedApplication:
                  value:
                    has_application: true
                    is_seller: false
                    status: rejected
                    application_id: 42
                    submitted_at: '2025-01-15T10:30:00Z'
                    admin_notes: Please improve portfolio quality
                    rejection_reason: Portfolio does not meet quality standards
                  summary: Rejected Application
          description: Application status
    post:
      operationId: seller_application_submit
      description: "\n        Submit or resubmit application to become a seller.\n\
        \n        **Requirements:**\n        - User must be authenticated\n      \
        \  - User must have 2FA enabled\n        - User cannot already be a seller\n\
        \        - Cannot have existing pending application\n\n        **Files:**\
        \ Upload 1-5 workshop photos (max 10MB each, jpg/png/webp)\n\n        **Rate\
        \ Limiting:** 2 applications per hour (if Kong Gateway enabled)\n        "
      summary: Submit seller application
      tags:
      - Seller Applications
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SellerApplicationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SellerApplicationRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerApplicationSubmitResponse'
              examples:
                SuccessfulSubmission:
                  value:
                    message: Seller application submitted successfully
                    application_id: 42
                    images_uploaded: 3
                  summary: Successful Submission
          description: Application submitted successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Validation error or requirements not met
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: 2FA not enabled or already a seller
  /api/auth/seller/apply/:
    get:
      operationId: seller_application_status_2
      description: "\n        Check the status of your seller application.\n\n   \
        \     **Possible Statuses:**\n        - `none` - No application submitted\n\
        \        - `pending` - Application under review\n        - `approved` - Application\
        \ approved (user is now seller)\n        - `rejected` - Application rejected\
        \ (can resubmit)\n        "
      summary: Get seller application status
      tags:
      - Seller Applications
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerApplicationStatusResponse'
              examples:
                PendingApplication:
                  value:
                    has_application: true
                    is_seller: false
                    status: pending
                    application_id: 42
                    submitted_at: '2025-01-15T10:30:00Z'
                    admin_notes: null
                    rejection_reason: null
                  summary: Pending Application
                ApprovedApplication:
                  value:
                    has_application: true
                    is_seller: true
                    status: approved
                    application_id: 42
                    submitted_at: '2025-01-15T10:30:00Z'
                    admin_notes: Great portfolio!
                    rejection_reason: null
                  summary: Approved Application
                RejectedApplication:
                  value:
                    has_application: true
                    is_seller: false
                    status: rejected
                    application_id: 42
                    submitted_at: '2025-01-15T10:30:00Z'
                    admin_notes: Please improve portfolio quality
                    rejection_reason: Portfolio does not meet quality standards
                  summary: Rejected Application
          description: Application status
    post:
      operationId: seller_application_submit_2
      description: "\n        Submit or resubmit application to become a seller.\n\
        \n        **Requirements:**\n        - User must be authenticated\n      \
        \  - User must have 2FA enabled\n        - User cannot already be a seller\n\
        \        - Cannot have existing pending application\n\n        **Files:**\
        \ Upload 1-5 workshop photos (max 10MB each, jpg/png/webp)\n\n        **Rate\
        \ Limiting:** 2 applications per hour (if Kong Gateway enabled)\n        "
      summary: Submit seller application
      tags:
      - Seller Applications
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/SellerApplicationRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SellerApplicationRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerApplicationSubmitResponse'
              examples:
                SuccessfulSubmission:
                  value:
                    message: Seller application submitted successfully
                    application_id: 42
                    images_uploaded: 3
                  summary: Successful Submission
          description: Application submitted successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Validation error or requirements not met
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: 2FA not enabled or already a seller
  /api/auth/token/refresh/:
    post:
      operationId: auth_token_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - auth
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      security:
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
  /api/auth/users/{id}/:
    get:
      operationId: auth_users_retrieve
      description: Get public profile of a user.
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - auth
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicUser'
          description: ''
  /api/auth/verify-email/:
    post:
      operationId: auth_verify_email
      description: "\n        Verify user's email address using the token from verification\
        \ email.\n\n        **Flow:**\n        1. User receives email with verification\
        \ link\n        2. Frontend extracts token from URL\n        3. Frontend sends\
        \ token to this endpoint\n        4. User account activated\n        "
      summary: Verify email address
      tags:
      - Authentication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyEmailRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/VerifyEmailRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/VerifyEmailRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VerifyEmailResponse'
          description: Email verified successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid or expired token
  /api/chat/:
    get:
      operationId: chat_list
      description: List user's chats or create a new chat
      tags:
      - chat
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Chat'
          description: ''
    post:
      operationId: chat_create
      description: List user's chats or create a new chat
      tags:
      - chat
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Chat'
          description: ''
  /api/chat/{chat_id}/messages/:
    get:
      operationId: chat_messages_list
      description: List messages in a chat or send a new message
      parameters:
      - in: path
        name: chat_id
        schema:
          type: integer
        required: true
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      - name: page_size
        required: false
        in: query
        description: Number of results to return per page.
        schema:
          type: integer
      tags:
      - chat
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedMessageList'
          description: ''
    post:
      operationId: chat_messages_create
      description: List messages in a chat or send a new message
      parameters:
      - in: path
        name: chat_id
        schema:
          type: integer
        required: true
      tags:
      - chat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MessageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/MessageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/MessageRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Message'
          description: ''
  /api/chat/{chat_id}/messages/mark-read/:
    post:
      operationId: chat_messages_mark_read_create
      description: Mark all messages in a chat as read for the current user
      parameters:
      - in: path
        name: chat_id
        schema:
          type: integer
        required: true
      tags:
      - chat
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/chat/{id}/:
    get:
      operationId: chat_retrieve
      description: Get details of a specific chat
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      tags:
      - chat
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Chat'
          description: ''
  /api/chat/search-users/:
    get:
      operationId: chat_search_users_retrieve
      description: Search for users to start a chat with
      tags:
      - chat
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/chat/upload-image/:
    post:
      operationId: chat_upload_image_create
      description: Upload image for chat messages to S3
      tags:
      - chat
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/marketplace/cart/:
    get:
      operationId: cart_get
      description: "\n        **What it receives:**\n        - Authentication token\
        \ (header)\n\n        **What it returns:**\n        - Cart items with product\
        \ details\n        - Totals (subtotal, shipping, tax, total)\n        - Item\
        \ count\n        "
      summary: Get user's shopping cart
      tags:
      - Marketplace - Cart
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CartResponse'
          description: Cart retrieved successfully
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/cart/add_item/:
    post:
      operationId: cart_add_item
      description: "\n        **What it receives:**\n        - `product_id` (UUID):\
        \ Product to add\n        - `quantity` (integer, optional): Quantity to add\
        \ (default: 1)\n\n        **What it returns:**\n        - Updated cart with\
        \ all items\n        - Updated totals\n        "
      summary: Add item to cart
      tags:
      - Marketplace - Cart
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddToCartRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AddToCartRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AddToCartRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
          description: Item added successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid data or insufficient stock
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Product not found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/cart/clear/:
    delete:
      operationId: cart_clear
      description: "\n        **What it receives:**\n        - Authentication token\
        \ (header)\n\n        **What it returns:**\n        - Success message (204\
        \ No Content)\n        "
      summary: Clear all items from cart
      tags:
      - Marketplace - Cart
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: Cart cleared successfully
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/cart/remove_item/:
    delete:
      operationId: cart_remove_item
      description: "\n        **What it receives:**\n        - `product_id` (UUID):\
        \ Product to remove\n\n        **What it returns:**\n        - Updated cart\
        \ without the removed item\n        - Updated totals\n        "
      summary: Remove item from cart
      tags:
      - Marketplace - Cart
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
          description: Item removed successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid product_id
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Item not in cart
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/cart/status/:
    get:
      operationId: cart_status
      description: "\n        **What it receives:**\n        - Authentication token\
        \ (header)\n\n        **What it returns:**\n        - Cart ID\n        - Total\
        \ items count\n        - Total amount\n        - Modifiable status\n     \
        \   - Last updated timestamp\n        "
      summary: Get cart status summary
      tags:
      - Marketplace - Cart
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: Cart status retrieved successfully
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/cart/update_item/:
    patch:
      operationId: cart_update_item
      description: "\n        **What it receives:**\n        - `product_id` (UUID):\
        \ Product to update\n        - `quantity` (integer): New quantity (0 to remove\
        \ item)\n\n        **What it returns:**\n        - Updated cart with modified\
        \ quantities\n        - Updated totals\n        "
      summary: Update item quantity in cart
      tags:
      - Marketplace - Cart
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedUpdateCartRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedUpdateCartRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedUpdateCartRequestRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
          description: Item updated successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid data or insufficient stock
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Item not in cart
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/cart/validate_stock/:
    post:
      operationId: cart_validate_stock
      description: "\n        **What it receives:**\n        - Authentication token\
        \ (header)\n\n        **What it returns:**\n        - Validation result (valid:\
        \ boolean)\n        - List of issues (out_of_stock, inactive, price_changed)\n\
        \        "
      summary: Validate cart items stock availability
      tags:
      - Marketplace - Cart
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CartItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CartItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CartItemRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: Validation completed
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/internal/orders/{order_id}/:
    get:
      operationId: internal_get_order
      description: "\n    **Internal API for service-to-service communication.**\n\
        \n    Returns order data needed by other services (e.g., Payment webhooks,\
        \ Notification service).\n\n    **What it receives:**\n    - `order_id` (UUID\
        \ in URL): The order to fetch\n\n    **What it returns:**\n    - Order ID,\
        \ status, total amount, buyer ID, payment status, creation timestamp\n\n \
        \   **Security:**\n    - Should only be accessible within internal network\n\
        \    - NOT exposed through Kong Gateway to public\n    - Used by Payment service\
        \ for webhook processing\n\n    **Use Cases:**\n    - Payment webhook confirming\
        \ payment for an order\n    - Notification service sending order status updates\n\
        \    - Analytics service tracking order metrics\n    "
      summary: '[INTERNAL] Get order information'
      parameters:
      - in: path
        name: order_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Internal
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalOrderInfo'
              examples:
                Success:
                  value:
                    id: 789e4567-e89b-12d3-a456-426614174999
                    status: pending_payment
                    total_amount: '1249.99'
                    buyer_id: 123
                    payment_status: pending
                    created_at: '2025-12-11T18:30:00Z'
          description: Order information retrieved successfully
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                NotFound:
                  value:
                    error: order_not_found
                    message: Order not found
                  summary: Not Found
          description: Order not found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Error:
                  value:
                    error: internal_error
                    message: Database connection failed
          description: Internal error
  /api/marketplace/metrics/:
    get:
      operationId: marketplace_metrics_retrieve
      description: Exposes Prometheus metrics for the marketplace app.
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          description: No response body
  /api/marketplace/metrics/{id}/:
    get:
      operationId: marketplace_metrics_retrieve_2
      description: ViewSet for product metrics - read-only for sellers
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductMetrics'
          description: ''
  /api/marketplace/orders/:
    get:
      operationId: orders_list
      description: "\n        **What it receives:**\n        - Authentication token\n\
        \        - Optional status filter (query param)\n        - Pagination parameters\
        \ (page, page_size)\n\n        **What it returns:**\n        - Paginated list\
        \ of orders where user is the buyer\n        - Total count and page information\n\
        \        "
      summary: List user's orders (as buyer)
      parameters:
      - in: query
        name: page
        schema:
          type: integer
        description: 'Page number (default: 1)'
      - in: query
        name: page_size
        schema:
          type: integer
        description: 'Items per page (default: 20)'
      - in: query
        name: status
        schema:
          type: string
        description: Filter by order status
      tags:
      - Marketplace - Orders
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/OrderListResponse'
          description: Orders retrieved successfully
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
    post:
      operationId: orders_create
      description: "\n        **What it receives:**\n        - `shipping_address`\
        \ (object): Delivery address (street, city, country required)\n        - `buyer_notes`\
        \ (string, optional): Notes for seller\n        - `shipping_cost` (decimal,\
        \ optional): Override shipping cost\n        - Authentication token\n\n  \
        \      **What it returns:**\n        - Created order with pending payment\
        \ status\n        - Cart is cleared after order creation\n        - Stock\
        \ is reserved for order items\n        "
      summary: Create order from cart
      tags:
      - Marketplace - Orders
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateOrderRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CreateOrderRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateOrderRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetailResponse'
          description: Order created successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Cart empty or validation error
        '409':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Insufficient stock or reservation failed
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/orders/{id}/:
    get:
      operationId: orders_retrieve
      description: "\n        **What it receives:**\n        - `order_id` (UUID in\
        \ URL): Order to retrieve\n        - Authentication token (must be order buyer\
        \ or seller of items)\n\n        **What it returns:**\n        - Complete\
        \ order details including items, shipping, payment status\n        "
      summary: Get order details
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Orders
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetailResponse'
          description: Order retrieved successfully
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Not order owner
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Order not found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/orders/{id}/cancel/:
    post:
      operationId: orders_cancel
      description: "\n        **What it receives:**\n        - `order_id` (UUID in\
        \ URL): Order to cancel\n        - `reason` (string, optional): Cancellation\
        \ reason\n        - Authentication token (must be order buyer)\n\n       \
        \ **What it returns:**\n        - Updated order with cancelled status\n  \
        \      - Reserved stock is released back to inventory\n        "
      summary: Cancel order
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Orders
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CancelOrderRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CancelOrderRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CancelOrderRequestRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetailResponse'
          description: Order cancelled successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Order cannot be cancelled (already shipped/delivered)
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Not order owner
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Order not found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/orders/{id}/update_shipping/:
    patch:
      operationId: orders_update_shipping
      description: "\n        **What it receives:**\n        - `order_id` (UUID in\
        \ URL): Order to update\n        - `tracking_number` (string): Shipment tracking\
        \ number\n        - `shipping_carrier` (string): Carrier name (e.g., \"UPS\"\
        , \"FedEx\")\n        - `carrier_code` (string, optional): Carrier code\n\
        \        - Authentication token (must be seller of items in order or admin)\n\
        \n        **What it returns:**\n        - Updated order with shipping information\n\
        \        - Order status transitions to \"shipped\"\n        "
      summary: Update order shipping information (Seller/Admin only)
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Orders
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetailResponse'
          description: Shipping updated successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid order state or missing fields
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Permission denied
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Order not found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/orders/seller_orders/:
    get:
      operationId: orders_seller_orders
      description: "\n        **What it receives:**\n        - Authentication token\
        \ (user must have products as seller)\n        - Optional status filter (query\
        \ param)\n        - Pagination parameters (page, page_size)\n\n        **What\
        \ it returns:**\n        - Paginated list of orders containing items sold\
        \ by current user\n        - Total count and page information\n        "
      summary: List orders where user is the seller
      parameters:
      - in: query
        name: page
        schema:
          type: integer
        description: 'Page number (default: 1)'
      - in: query
        name: page_size
        schema:
          type: integer
        description: 'Items per page (default: 20)'
      - in: query
        name: status
        schema:
          type: string
        description: Filter by order status
      tags:
      - Marketplace - Orders
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderListResponse'
          description: Orders retrieved successfully
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/products/:
    get:
      operationId: products_list
      description: "\n        **What it receives:**\n        - Query parameters for\
        \ filtering (category, seller, price range, condition, brand, stock status)\n\
        \        - Pagination parameters (page, page_size)\n        - Ordering parameter\n\
        \n        **What it returns:**\n        - Paginated list of products\n   \
        \     - Total count and page information\n        "
      summary: List products with filters
      parameters:
      - in: query
        name: brand
        schema:
          type: string
        description: Filter by brand
      - in: query
        name: category
        schema:
          type: string
        description: Filter by category slug
      - in: query
        name: condition
        schema:
          type: string
        description: Product condition (new, used, etc.)
      - in: query
        name: in_stock
        schema:
          type: boolean
        description: Only show in-stock products
      - in: query
        name: is_featured
        schema:
          type: boolean
        description: Only show featured products
      - in: query
        name: ordering
        schema:
          type: string
        description: 'Order by field (default: -created_at)'
      - in: query
        name: page
        schema:
          type: integer
        description: 'Page number (default: 1)'
      - in: query
        name: page_size
        schema:
          type: integer
        description: 'Items per page (default: 20)'
      - in: query
        name: price_max
        schema:
          type: number
          format: double
        description: Maximum price
      - in: query
        name: price_min
        schema:
          type: number
          format: double
        description: Minimum price
      - in: query
        name: seller
        schema:
          type: integer
        description: Filter by seller ID
      tags:
      - Marketplace - Products
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductListPaginatedResponse'
          description: Products retrieved successfully
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
    post:
      operationId: products_create
      description: "\n        **What it receives:**\n        - Product data (name,\
        \ description, price, category, stock, etc.)\n        - Product images via\
        \ multipart/form-data (any field name, e.g., 'uploaded_images', 'images',\
        \ etc.)\n        - Optional `image_metadata` (JSON string) with format:\n\
        \          ```json\n          {\n            \"filename.jpg\": {\n       \
        \       \"alt_text\": \"Image description\",\n              \"is_primary\"\
        : true,\n              \"order\": 0\n            }\n          }\n        \
        \  ```\n        - Authentication token (must be a seller)\n\n        **What\
        \ it returns:**\n        - Created product with generated ID and slug\n  \
        \      - All uploaded images with their metadata (alt_text, is_primary, order)\n\
        \n        **Example:**\n        Upload images with metadata to control display\
        \ order and primary image selection.\n        "
      summary: Create a new product (Seller only)
      tags:
      - Marketplace - Products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductCreateUpdateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductDetail'
          description: Product created successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid data
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Permission denied (not a seller)
  /api/marketplace/products/{product_slug}/images/:
    get:
      operationId: marketplace_products_images_list
      description: ViewSet for product images
      parameters:
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductImage'
          description: ''
    post:
      operationId: marketplace_products_images_create
      description: ViewSet for product images
      parameters:
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - marketplace
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
  /api/marketplace/products/{product_slug}/images/{id}/:
    get:
      operationId: marketplace_products_images_retrieve
      description: ViewSet for product images
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
    put:
      operationId: marketplace_products_images_update
      description: ViewSet for product images
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - marketplace
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductImageRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductImage'
          description: ''
    delete:
      operationId: marketplace_products_images_destroy
      description: ViewSet for product images
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/marketplace/products/{product_slug}/metrics/:
    get:
      operationId: marketplace_products_metrics_retrieve
      description: ViewSet for product metrics - read-only for sellers
      parameters:
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductMetrics'
          description: ''
  /api/marketplace/products/{product_slug}/reviews/:
    get:
      operationId: reviews_list
      description: "\n        **What it receives:**\n        - `product_slug` or `product_id`\
        \ (query param): Product to get reviews for\n        - Pagination parameters\
        \ (page, page_size)\n        - Ordering parameter\n\n        **What it returns:**\n\
        \        - Paginated list of reviews for the product\n        "
      summary: List product reviews
      parameters:
      - in: query
        name: ordering
        schema:
          type: string
        description: 'Order by field (default: -created_at)'
      - in: query
        name: page
        schema:
          type: integer
        description: 'Page number (default: 1)'
      - in: query
        name: page_size
        schema:
          type: integer
        description: 'Items per page (default: 20)'
      - in: query
        name: product_id
        schema:
          type: string
        description: Product UUID
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      - in: query
        name: product_slug
        schema:
          type: string
        description: Product slug
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          description: Reviews retrieved successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Missing product identifier
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Product not found
    post:
      operationId: reviews_create
      summary: Create product review
      parameters:
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReviewRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CreateReviewRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateReviewRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
  /api/marketplace/products/{product_slug}/reviews/{id}/:
    get:
      operationId: reviews_retrieve
      description: Get a specific review by ID.
      summary: Get review details
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
    put:
      operationId: reviews_update
      summary: Update review
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
          description: ''
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
    delete:
      operationId: reviews_delete
      summary: Delete review
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        required: true
      - in: path
        name: product_slug
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
  /api/marketplace/products/{slug}/:
    get:
      operationId: products_retrieve
      description: "\n        **What it receives:**\n        - `slug` (string in URL):\
        \ Product slug identifier\n\n        **What it returns:**\n        - Complete\
        \ product details including:\n          - Full product information\n     \
        \     - Array of images with proxy URLs\n          - Array of reviews with\
        \ reviewer info\n          - Seller info (id, username, rating)\n        \
        \  - Category info\n        - View count is automatically incremented\n  \
        \      "
      summary: Get product details
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Products
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductDetail'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Product not found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
    put:
      operationId: products_update
      description: "\n        **What it receives:**\n        - `slug` (string in URL):\
        \ Product to update\n        - Complete product data (all fields required)\n\
        \        - Authentication token (must be product owner)\n\n        **What\
        \ it returns:**\n        - Updated product details\n        "
      summary: Update product (Owner only)
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductCreateUpdateRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductDetail'
          description: Product updated successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid data
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Not product owner
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Product not found
    patch:
      operationId: products_partial_update
      description: "\n        **What it receives:**\n        - `slug` (string in URL):\
        \ Product to update\n        - Partial product data (only fields to update)\n\
        \        - Authentication token (must be product owner)\n\n        **What\
        \ it returns:**\n        - Updated product details\n        "
      summary: Partially update product (Owner only)
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProductCreateUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProductCreateUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProductCreateUpdateRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductDetail'
          description: Product updated successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid data
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Not product owner
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Product not found
    delete:
      operationId: products_delete
      description: "\n        **What it receives:**\n        - `slug` (string in URL):\
        \ Product to delete\n        - Authentication token (must be product owner)\n\
        \n        **What it returns:**\n        - 204 No Content on success\n    \
        \    "
      summary: Delete product (Owner only)
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Products
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: Product deleted successfully
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Not product owner
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Product not found
  /api/marketplace/products/{slug}/favorite/:
    post:
      operationId: products_toggle_favorite
      description: "\n        **What it receives:**\n        - `slug` (string in URL):\
        \ Product to favorite/unfavorite\n        - Authentication token\n\n     \
        \   **What it returns:**\n        - `{\"favorited\": true}` if product was\
        \ added to favorites\n        - `{\"favorited\": false}` if product was removed\
        \ from favorites\n        "
      summary: Toggle product favorite status
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Products
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductListRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProductListRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProductListRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: Favorite status toggled
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Authentication required
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Product not found
  /api/marketplace/products/autocomplete/:
    get:
      operationId: marketplace_products_autocomplete_retrieve
      description: |-
        ViewSet for search, filter, and autocomplete operations.
        Delegates logic to SearchService.
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          description: No response body
  /api/marketplace/products/categories/:
    get:
      operationId: marketplace_products_categories_list
      description: Retrieve a list of all active product categories.
      summary: List all categories
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Category'
          description: ''
  /api/marketplace/products/categories/{slug}/:
    get:
      operationId: marketplace_products_categories_retrieve
      description: Retrieve details of a specific category by slug.
      summary: Get category details
      parameters:
      - in: path
        name: slug
        schema:
          type: string
        required: true
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
  /api/marketplace/products/favorites/:
    get:
      operationId: products_favorites
      description: "\n        **What it receives:**\n        - Authentication token\n\
        \n        **What it returns:**\n        - List of products marked as favorites\
        \ by current user\n        "
      summary: Get user's favorite products
      tags:
      - Marketplace - Products
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductFavorite'
          description: Favorites retrieved successfully
        '401':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Authentication required
  /api/marketplace/products/filters/:
    get:
      operationId: marketplace_products_filters_retrieve
      description: |-
        ViewSet for search, filter, and autocomplete operations.
        Delegates logic to SearchService.
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          description: No response body
  /api/marketplace/products/metrics/:
    get:
      operationId: marketplace_products_metrics_list
      description: ViewSet for product metrics - read-only for sellers
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductMetrics'
          description: ''
  /api/marketplace/products/my_products/:
    get:
      operationId: products_my_products
      description: "\n        **What it receives:**\n        - Authentication token\
        \ (must be a seller)\n\n        **What it returns:**\n        - List of products\
        \ owned by current user\n        "
      summary: Get current user's products (Seller only)
      tags:
      - Marketplace - Products
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductList'
          description: Products retrieved successfully
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/products/search/:
    get:
      operationId: products_search
      description: Search for products with filters and pagination
      summary: Search products
      parameters:
      - in: query
        name: brand
        schema:
          type: string
        description: Filter by brand
      - in: query
        name: category
        schema:
          type: array
          items:
            type: string
        description: Filter by category (can be multiple)
      - in: query
        name: condition
        schema:
          type: array
          items:
            type: string
        description: Filter by condition (can be multiple)
      - in: query
        name: in_stock
        schema:
          type: boolean
        description: Only show in-stock products
      - in: query
        name: is_featured
        schema:
          type: boolean
        description: Only show featured products
      - in: query
        name: min_rating
        schema:
          type: number
          format: double
        description: Minimum rating
      - in: query
        name: page
        schema:
          type: integer
        description: 'Page number (default: 1)'
      - in: query
        name: page_size
        schema:
          type: integer
        description: 'Items per page (default: 20)'
      - in: query
        name: price_max
        schema:
          type: number
          format: double
        description: Maximum price
      - in: query
        name: price_min
        schema:
          type: number
          format: double
        description: Minimum price
      - in: query
        name: q
        schema:
          type: string
        description: Search query
      - in: query
        name: seller
        schema:
          type: string
        description: Filter by seller ID
      - in: query
        name: sort
        schema:
          type: string
        description: Sort by (relevance, price, newest, popular)
      tags:
      - Marketplace - Search
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductSearchPaginatedResponse'
          description: Search results
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/marketplace/profiles/:
    get:
      operationId: marketplace_profiles_list
      description: ViewSet for user profiles
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
          description: ''
  /api/marketplace/profiles/{id}/:
    get:
      operationId: marketplace_profiles_retrieve
      description: ViewSet for user profiles
      parameters:
      - in: path
        name: id
        schema:
          type: string
          format: uuid
        description: A UUID string identifying this custom user.
        required: true
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
  /api/marketplace/reviews/:
    get:
      operationId: reviews_list_2
      description: "\n        **What it receives:**\n        - `product_slug` or `product_id`\
        \ (query param): Product to get reviews for\n        - Pagination parameters\
        \ (page, page_size)\n        - Ordering parameter\n\n        **What it returns:**\n\
        \        - Paginated list of reviews for the product\n        "
      summary: List product reviews
      parameters:
      - in: query
        name: ordering
        schema:
          type: string
        description: 'Order by field (default: -created_at)'
      - in: query
        name: page
        schema:
          type: integer
        description: 'Page number (default: 1)'
      - in: query
        name: page_size
        schema:
          type: integer
        description: 'Items per page (default: 20)'
      - in: query
        name: product_id
        schema:
          type: string
        description: Product UUID
      - in: query
        name: product_slug
        schema:
          type: string
        description: Product slug
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          description: Reviews retrieved successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Missing product identifier
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Product not found
    post:
      operationId: reviews_create_2
      summary: Create product review
      tags:
      - Marketplace - Reviews
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReviewRequestRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/CreateReviewRequestRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/CreateReviewRequestRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
          description: ''
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
  /api/marketplace/reviews/{id}/:
    get:
      operationId: reviews_retrieve_2
      description: Get a specific review by ID.
      summary: Get review details
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
    put:
      operationId: reviews_update_2
      summary: Update review
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
          description: ''
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
    patch:
      operationId: reviews_partial_update
      summary: Partially update review
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReviewResponse'
          description: ''
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
    delete:
      operationId: reviews_delete_2
      summary: Delete review
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
  /api/marketplace/reviews/{id}/mark_helpful/:
    post:
      operationId: reviews_mark_helpful
      summary: Mark review as helpful
      parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
      tags:
      - Marketplace - Reviews
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
        '403':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: ''
  /api/marketplace/sellers/{seller_id}/:
    get:
      operationId: marketplace_sellers_retrieve
      parameters:
      - in: path
        name: seller_id
        schema:
          type: integer
        required: true
      tags:
      - marketplace
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          description: No response body
  /api/marketplace/sellers/{seller_id}/products/:
    get:
      operationId: products_list_2
      description: "\n        **What it receives:**\n        - Query parameters for\
        \ filtering (category, seller, price range, condition, brand, stock status)\n\
        \        - Pagination parameters (page, page_size)\n        - Ordering parameter\n\
        \n        **What it returns:**\n        - Paginated list of products\n   \
        \     - Total count and page information\n        "
      summary: List products with filters
      parameters:
      - in: query
        name: brand
        schema:
          type: string
        description: Filter by brand
      - in: query
        name: category
        schema:
          type: string
        description: Filter by category slug
      - in: query
        name: condition
        schema:
          type: string
        description: Product condition (new, used, etc.)
      - in: query
        name: in_stock
        schema:
          type: boolean
        description: Only show in-stock products
      - in: query
        name: is_featured
        schema:
          type: boolean
        description: Only show featured products
      - in: query
        name: ordering
        schema:
          type: string
        description: 'Order by field (default: -created_at)'
      - in: query
        name: page
        schema:
          type: integer
        description: 'Page number (default: 1)'
      - in: query
        name: page_size
        schema:
          type: integer
        description: 'Items per page (default: 20)'
      - in: query
        name: price_max
        schema:
          type: number
          format: double
        description: Maximum price
      - in: query
        name: price_min
        schema:
          type: number
          format: double
        description: Minimum price
      - in: query
        name: seller
        schema:
          type: integer
        description: Filter by seller ID
      - in: path
        name: seller_id
        schema:
          type: integer
        required: true
      tags:
      - Marketplace - Products
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductListPaginatedResponse'
          description: Products retrieved successfully
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Internal server error
  /api/payments/admin/payouts/:
    get:
      operationId: payments_admin_payouts_retrieve
      description: |-
        Admin endpoint: List all payouts across all sellers with filtering and pagination.

        Query Parameters:
        - status: Filter by payout status (pending, paid, failed, etc.)
        - seller_id: Filter by specific seller
        - from_date: Filter payouts from this date (YYYY-MM-DD)
        - to_date: Filter payouts to this date (YYYY-MM-DD)
        - page_size: Number of results per page (default 50, max 200)
        - offset: Pagination offset
        - search: Search by seller username or email
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/admin/transactions/:
    get:
      operationId: payments_admin_transactions_retrieve
      description: |-
        Admin endpoint: List all payment transactions across all sellers with filtering.

        Query Parameters:
        - status: Filter by transaction status (held, completed, released, etc.)
        - seller_id: Filter by specific seller
        - buyer_id: Filter by specific buyer
        - from_date: Filter transactions from this date
        - to_date: Filter transactions to this date
        - page_size: Number of results per page (default 50, max 200)
        - offset: Pagination offset
        - search: Search by seller/buyer username or order ID
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/checkout_session/:
    post:
      operationId: payments_checkout_session_create
      description: |-
        Create an Embedded Checkout Session for the user's cart and seed the Order.

        This function validates stock and pricing, builds Stripe line items (products +
        shipping), creates an Order in pending_payment with reserved stock, starts an
        embedded checkout session carrying order/user metadata, and returns clientSecret.
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/checkout_session/retry/{order_id}/:
    get:
      operationId: payments_checkout_session_retry_retrieve
      description: |-
        Create a retry Embedded Checkout Session for a pending order.

        This function verifies ownership and 'pending_payment' status, rebuilds Stripe line
        items from the order (with stock checks), creates an embedded checkout session with
        order/user metadata, and returns the clientSecret for the frontend to resume.
      parameters:
      - in: path
        name: order_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/orders/{order_id}/cancel/:
    post:
      operationId: payments_orders_cancel_create
      description: |-
        Cancel an order with refund handling and stock restoration.

        This function cancels orders that are 'pending_payment' by restoring reserved stock,
        marking cancellation metadata, and setting payment_status to 'failed'. If the order
        was paid, it initiates a Stripe refund, moves the order to 'waiting_refund', and
        persists metadata; final status transitions occur via the refund webhook. Terminal
        states (shipped, delivered, cancelled, refunded) are rejected.
      parameters:
      - in: path
        name: order_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/payout/:
    post:
      operationId: payments_payout_create
      description: |-
        Manual payout creation has been disabled.

        This endpoint now exists only to provide a clear error response
        indicating that manual payout creation is no longer supported.
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/payouts/:
    get:
      operationId: payments_payouts_retrieve
      description: |-
        Retrieve all payouts for the authenticated user (seller).
        Returns a paginated list of payouts with summary information.
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/payouts/{payout_id}/:
    get:
      operationId: payments_payouts_retrieve_2
      description: |-
        Retrieve detailed information about a specific payout including all orders.
        Only accessible by the seller who owns the payout.
      parameters:
      - in: path
        name: payout_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/payouts/{payout_id}/orders/:
    get:
      operationId: payments_payouts_orders_retrieve
      description: |-
        Retrieve all orders included in a specific payout.
        Returns detailed order information with amounts.
        Only includes order items where the current user is the product owner.
      parameters:
      - in: path
        name: payout_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/stripe/account/:
    get:
      operationId: payments_stripe_account_retrieve
      description: |-
        Unified endpoint for Stripe Connect account management.

        This function returns existing account status on GET, or creates a new account on
        POST after basic eligibility checks, surfacing requirements and next steps for the
        seller’s onboarding.
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
    post:
      operationId: payments_stripe_account_create
      description: |-
        Unified endpoint for Stripe Connect account management.

        This function returns existing account status on GET, or creates a new account on
        POST after basic eligibility checks, surfacing requirements and next steps for the
        seller’s onboarding.
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/stripe/account-status/:
    get:
      operationId: payments_stripe_account_status_retrieve
      description: Return the Stripe Connect account status for the authenticated
        user.
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/stripe/create-session/:
    post:
      operationId: payments_stripe_create_session_create
      description: |-
        Create a Stripe Account Session for seller onboarding or updates.

        This function returns an Account Session client_secret for onboarding or updating a
        seller’s connected account. Requires the user to have an existing Stripe account.
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/stripe/holds/:
    get:
      operationId: payments_stripe_holds_retrieve
      description: |-
        Get all payment holds for the authenticated seller with remaining time calculation
        Using simplified PaymentTransaction model with integrated hold system
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/payments/transfer/:
    post:
      operationId: payments_transfer_create
      description: |-
        Transfer held funds to a seller’s connected Stripe account.

        This function validates permissions and readiness (held status, delivered order,
        optional release date), computes the transfer amount in cents, and creates a Stripe
        transfer, returning details along with exchange-rate context.
      tags:
      - payments
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /internal/auth/check-email/{email}/:
    get:
      operationId: internal_auth_check_email_retrieve
      description: |-
        Internal API: Check if email exists.

        Used by other services to check email availability.
        Does NOT reveal if email exists (returns same response for security).

        Args:
            email (str): Email address to check

        Returns:
            200: Email check result

        Example:
            GET /internal/auth/check-email/user@example.com/

            Response:
            {
                "exists": true,
                "is_verified": true,
                "user_id": "123e4567-e89b-12d3-a456-426614174000"
            }
      parameters:
      - in: path
        name: email
        schema:
          type: string
        required: true
      tags:
      - internal
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /internal/auth/users/{user_id}/:
    get:
      operationId: internal_auth_users_retrieve
      description: |-
        Internal API: Get user by ID.

        Used by other services (marketplace, orders) to fetch user data.
        Not exposed through API Gateway - internal network only.

        Args:
            user_id (UUID): User ID

        Returns:
            200: User data
            404: User not found

        Example:
            GET /internal/auth/users/123e4567-e89b-12d3-a456-426614174000/

            Response:
            {
                "id": "123e4567-e89b-12d3-a456-426614174000",
                "email": "user@example.com",
                "username": "johndoe",
                "first_name": "John",
                "last_name": "Doe",
                "role": "seller",
                "is_email_verified": true,
                "is_active": true,
                "is_seller": true
            }
      parameters:
      - in: path
        name: user_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - internal
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /internal/auth/users/batch/:
    post:
      operationId: internal_auth_users_batch_create
      description: |-
        Internal API: Get multiple users by IDs (batch query).

        Used by services that need to fetch many users at once.
        More efficient than multiple single-user requests.

        Request Body:
            {
                "user_ids": ["uuid1", "uuid2", "uuid3"]
            }

        Returns:
            200: List of users (only found users)

        Example:
            POST /internal/auth/users/batch/
            {
                "user_ids": [
                    "123e4567-e89b-12d3-a456-426614174000",
                    "223e4567-e89b-12d3-a456-426614174001"
                ]
            }

            Response:
            {
                "users": [
                    {
                        "id": "123e4567-e89b-12d3-a456-426614174000",
                        "email": "user1@example.com",
                        "username": "user1",
                        "role": "customer"
                    },
                    {
                        "id": "223e4567-e89b-12d3-a456-426614174001",
                        "email": "user2@example.com",
                        "username": "user2",
                        "role": "seller"
                    }
                ]
            }
      tags:
      - internal
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /internal/auth/validate-token/:
    post:
      operationId: internal_auth_validate_token_create
      description: |-
        Internal API: Validate JWT token.

        Returns user info if token is valid.
        Used by services that need fast token validation.

        Request Body:
            {
                "token": "eyJhbGc..."
            }

        Returns:
            200: Token valid
            401: Token invalid/expired

        Example:
            POST /internal/auth/validate-token/
            {
                "token": "eyJhbGc..."
            }

            Response (valid):
            {
                "valid": true,
                "user_id": "123e4567-e89b-12d3-a456-426614174000",
                "email": "user@example.com",
                "role": "seller",
                "exp": 1735689600
            }

            Response (invalid):
            {
                "valid": false,
                "error": "Token is invalid or expired"
            }
      tags:
      - internal
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /internal/marketplace/orders/{order_id}/:
    get:
      operationId: internal_get_order_2
      description: "\n    **Internal API for service-to-service communication.**\n\
        \n    Returns order data needed by other services (e.g., Payment webhooks,\
        \ Notification service).\n\n    **What it receives:**\n    - `order_id` (UUID\
        \ in URL): The order to fetch\n\n    **What it returns:**\n    - Order ID,\
        \ status, total amount, buyer ID, payment status, creation timestamp\n\n \
        \   **Security:**\n    - Should only be accessible within internal network\n\
        \    - NOT exposed through Kong Gateway to public\n    - Used by Payment service\
        \ for webhook processing\n\n    **Use Cases:**\n    - Payment webhook confirming\
        \ payment for an order\n    - Notification service sending order status updates\n\
        \    - Analytics service tracking order metrics\n    "
      summary: '[INTERNAL] Get order information'
      parameters:
      - in: path
        name: order_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Internal
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalOrderInfo'
              examples:
                Success:
                  value:
                    id: 789e4567-e89b-12d3-a456-426614174999
                    status: pending_payment
                    total_amount: '1249.99'
                    buyer_id: 123
                    payment_status: pending
                    created_at: '2025-12-11T18:30:00Z'
          description: Order information retrieved successfully
        '404':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                NotFound:
                  value:
                    error: order_not_found
                    message: Order not found
                  summary: Not Found
          description: Order not found
        '500':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                Error:
                  value:
                    error: internal_error
                    message: Database connection failed
          description: Internal error
  /internal/marketplace/products/{product_id}/:
    get:
      operationId: internal_get_product
      description: "\n    **Internal API for service-to-service communication.**\n\
        \n    Returns minimal product data needed by other services (e.g., Payment,\
        \ Notifications).\n\n    **What it receives:**\n    - `product_id` (UUID in\
        \ URL): The product to fetch\n\n    **What it returns:**\n    - Product ID,\
        \ name, price, stock quantity, active status, seller ID\n\n    **Security:**\n\
        \    - Should only be accessible within internal network\n    - NOT exposed\
        \ through Kong Gateway to public\n    - Protected by network policies or firewall\
        \ rules\n\n    **Use Cases:**\n    - Payment service checking product price\
        \ before processing\n    - Notification service getting product details for\
        \ emails\n    - Inventory service validating product exists\n    "
      summary: '[INTERNAL] Get product information'
      parameters:
      - in: path
        name: product_id
        schema:
          type: string
          format: uuid
        required: true
      tags:
      - Internal
      security:
      - jwtAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalProductInfo'
              examples:
                Success:
                  value:
                    id: 123e4567-e89b-12d3-a456-426614174000
                    name: iPhone 15 Pro
                    price: '999.00'
                    stock_quantity: 10
                    is_active: true
                    seller_id: 42
          description: Product information retrieved successfully
        '400':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Invalid product ID format
components:
  schemas:
    AccountStatusResponse:
      type: object
      description: Response for account status check
      properties:
        is_active:
          type: boolean
          description: Whether the account is active
        is_email_verified:
          type: boolean
          description: Whether email is verified
        email:
          type: string
          format: email
          description: User's email address
        can_login:
          type: boolean
          description: Whether user can login (active + email verified)
        two_factor_enabled:
          type: boolean
          description: Whether 2FA is enabled
        role:
          type: string
          description: 'User role: customer, seller, or admin'
        account_created:
          type: string
          format: date-time
          description: When account was created
      required:
      - account_created
      - can_login
      - email
      - is_active
      - is_email_verified
      - role
      - two_factor_enabled
    AccountTypeEnum:
      enum:
      - personal
      - business
      - creator
      type: string
      description: |-
        * `personal` - Personal
        * `business` - Business
        * `creator` - Creator
    ActionEnum:
      enum:
      - approve
      - reject
      type: string
      description: |-
        * `approve` - approve
        * `reject` - reject
    AddToCartRequestRequest:
      type: object
      description: Request body for adding item to cart
      properties:
        product_id:
          type: string
          format: uuid
          description: Product UUID to add
        quantity:
          type: integer
          minimum: 1
          default: 1
          description: 'Quantity to add (default: 1)'
      required:
      - product_id
    BlankEnum:
      enum:
      - ''
    CancelOrderRequestRequest:
      type: object
      description: Request body for canceling an order
      properties:
        reason:
          type: string
          minLength: 1
          description: Reason for cancellation
    CartItem:
      type: object
      description: Single cart item
      properties:
        product:
          type: object
          additionalProperties: {}
          description: Product details (see ProductListSerializer)
        quantity:
          type: integer
          description: Quantity in cart
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Item subtotal (price × quantity)
      required:
      - product
      - quantity
      - subtotal
    CartItemRequest:
      type: object
      properties:
        product_id:
          type: string
          writeOnly: true
          minLength: 1
        quantity:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
      required:
      - product_id
    CartResponse:
      type: object
      description: Complete cart response
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/CartItem'
          description: Cart items
        totals:
          allOf:
          - $ref: '#/components/schemas/CartTotals'
          description: Cart totals
        item_count:
          type: integer
          description: Total number of items
      required:
      - item_count
      - items
      - totals
    CartTotals:
      type: object
      description: Cart totals breakdown
      properties:
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Sum of all items
        shipping:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Estimated shipping cost
        tax:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Estimated tax
        total:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Final total amount
      required:
      - shipping
      - subtotal
      - tax
      - total
    Category:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 100
        slug:
          type: string
          readOnly: true
          pattern: ^[-a-zA-Z0-9_]+$
        description:
          type: string
        parent:
          type: integer
          nullable: true
        subcategories:
          type: string
          readOnly: true
        product_count:
          type: string
          readOnly: true
        is_active:
          type: boolean
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - name
      - product_count
      - slug
      - subcategories
    Chat:
      type: object
      description: Serializer for chat conversations
      properties:
        id:
          type: integer
          readOnly: true
        user1:
          allOf:
          - $ref: '#/components/schemas/ChatUser'
          readOnly: true
        user2:
          allOf:
          - $ref: '#/components/schemas/ChatUser'
          readOnly: true
        other_user:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        last_message:
          allOf:
          - $ref: '#/components/schemas/Message'
          readOnly: true
        unread_count:
          type: string
          readOnly: true
      required:
      - created_at
      - id
      - last_message
      - other_user
      - unread_count
      - updated_at
      - user1
      - user2
    ChatUser:
      type: object
      description: Serializer for user info in chat context
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          readOnly: true
        first_name:
          type: string
          maxLength: 30
        last_name:
          type: string
          maxLength: 30
        profile_picture_temp_url:
          type: string
          readOnly: true
      required:
      - email
      - id
      - profile_picture_temp_url
      - username
    ChatUserRequest:
      type: object
      description: Serializer for user info in chat context
      properties:
        username:
          type: string
          minLength: 1
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        first_name:
          type: string
          maxLength: 30
        last_name:
          type: string
          maxLength: 30
      required:
      - username
    ConditionEnum:
      enum:
      - new
      - like_new
      - good
      - fair
      - poor
      type: string
      description: |-
        * `new` - New
        * `like_new` - Like New
        * `good` - Good
        * `fair` - Fair
        * `poor` - Poor
    CreateOrderRequestRequest:
      type: object
      description: Request body for creating an order
      properties:
        shipping_address:
          allOf:
          - $ref: '#/components/schemas/ShippingAddressRequest'
          description: Delivery address
        buyer_notes:
          type: string
          minLength: 1
          description: Optional notes for seller (e.g., delivery instructions)
      required:
      - shipping_address
    CreateReviewRequestRequest:
      type: object
      description: Request body for creating a review
      properties:
        product_id:
          type: string
          format: uuid
          description: Product UUID to review
        rating:
          type: integer
          maximum: 5
          minimum: 1
          description: Rating from 1 to 5 stars
        title:
          type: string
          minLength: 1
          description: Review title
          maxLength: 200
        comment:
          type: string
          minLength: 1
          description: Review text
      required:
      - product_id
      - rating
    ErrorResponse:
      type: object
      description: Standard error response
      properties:
        error:
          type: string
          description: Error message
        details:
          type: object
          additionalProperties: {}
          nullable: true
          description: Additional error details
      required:
      - error
    GenderEnum:
      enum:
      - male
      - female
      - non_binary
      - prefer_not_to_say
      - other
      type: string
      description: |-
        * `male` - Male
        * `female` - Female
        * `non_binary` - Non-binary
        * `prefer_not_to_say` - Prefer not to say
        * `other` - Other
    GoogleLoginRequestRequest:
      type: object
      description: Request body for Google OAuth login
      properties:
        token:
          type: string
          minLength: 1
          description: Google OAuth token from frontend
      required:
      - token
    ImageDataRequest:
      type: object
      description: Serializer for base64-encoded image uploads with metadata
      properties:
        image_content:
          type: string
          minLength: 1
          description: Base64-encoded image data (e.g., 'data:image/png;base64,iVBORw0KGgo...')
        filename:
          type: string
          minLength: 1
          description: Image filename
          maxLength: 255
        alt_text:
          type: string
          minLength: 1
          default: ''
          description: Alt text for the image
          maxLength: 200
        is_primary:
          type: boolean
          default: false
          description: Whether this is the primary image
        order:
          type: integer
          default: 0
          description: Display order of the image
      required:
      - filename
      - image_content
    ImageTypeEnum:
      enum:
      - workshop
      - inventory
      - product_sample
      - business_setup
      - tools_equipment
      - other
      type: string
      description: |-
        * `workshop` - Workshop Photo
        * `inventory` - Inventory Photo
        * `product_sample` - Product Sample
        * `business_setup` - Business Setup
        * `tools_equipment` - Tools & Equipment
        * `other` - Other
    ImageTypesEnum:
      enum:
      - workshop
      - inventory
      - product_sample
      - business_setup
      - tools_equipment
      - other
      type: string
      description: |-
        * `workshop` - Workshop Photo
        * `inventory` - Inventory Photo
        * `product_sample` - Product Sample
        * `business_setup` - Business Setup
        * `tools_equipment` - Tools & Equipment
        * `other` - Other
    InternalOrderInfo:
      type: object
      description: Internal API response for order info
      properties:
        id:
          type: string
          format: uuid
          description: Order UUID
        status:
          type: string
          description: Order status
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Order total
        buyer_id:
          type: integer
          description: Buyer user ID
        payment_status:
          type: string
          description: Payment status
        created_at:
          type: string
          format: date-time
          description: Order creation timestamp
      required:
      - buyer_id
      - created_at
      - id
      - payment_status
      - status
      - total_amount
    InternalProductInfo:
      type: object
      description: Internal API response for product info
      properties:
        id:
          type: string
          format: uuid
          description: Product UUID
        name:
          type: string
          description: Product name
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Current price
        stock_quantity:
          type: integer
          description: Available stock
        is_active:
          type: boolean
          description: Whether product is active
        seller_id:
          type: integer
          description: Seller user ID
      required:
      - id
      - is_active
      - name
      - price
      - seller_id
      - stock_quantity
    LanguageEnum:
      enum:
      - en
      - pt
      - es
      - fr
      - de
      - it
      - ru
      - ja
      - ko
      - zh
      - ar
      - hi
      - nl
      - sv
      - da
      - 'no'
      - fi
      - pl
      - tr
      - th
      - vi
      - id
      - ms
      - he
      - cs
      - hu
      - ro
      - bg
      - hr
      - sk
      - sl
      - et
      - lv
      - lt
      - mt
      - ga
      - cy
      - eu
      - ca
      - gl
      type: string
      description: |-
        * `en` - English
        * `pt` - Portuguese
        * `es` - Spanish
        * `fr` - French
        * `de` - German
        * `it` - Italian
        * `ru` - Russian
        * `ja` - Japanese
        * `ko` - Korean
        * `zh` - Chinese
        * `ar` - Arabic
        * `hi` - Hindi
        * `nl` - Dutch
        * `sv` - Swedish
        * `da` - Danish
        * `no` - Norwegian
        * `fi` - Finnish
        * `pl` - Polish
        * `tr` - Turkish
        * `th` - Thai
        * `vi` - Vietnamese
        * `id` - Indonesian
        * `ms` - Malay
        * `he` - Hebrew
        * `cs` - Czech
        * `hu` - Hungarian
        * `ro` - Romanian
        * `bg` - Bulgarian
        * `hr` - Croatian
        * `sk` - Slovak
        * `sl` - Slovenian
        * `et` - Estonian
        * `lv` - Latvian
        * `lt` - Lithuanian
        * `mt` - Maltese
        * `ga` - Irish
        * `cy` - Welsh
        * `eu` - Basque
        * `ca` - Catalan
        * `gl` - Galician
    Login2FAResponse:
      type: object
      description: Response for login requiring 2FA verification
      properties:
        requires_2fa:
          type: boolean
          default: true
          description: Whether 2FA is required
        message:
          type: string
          description: Instruction message
        user_id:
          type: string
          description: User ID for 2FA verification
        code_already_sent:
          type: boolean
          default: false
          description: Whether an unused 2FA code was already sent
      required:
      - message
      - user_id
    LoginRequestRequest:
      type: object
      description: Request body for login
      properties:
        email:
          type: string
          format: email
          minLength: 1
          description: User's email address
        password:
          type: string
          writeOnly: true
          minLength: 1
          description: User's password
      required:
      - email
      - password
    LoginResponse:
      type: object
      description: Response for successful login (no 2FA)
      properties:
        message:
          type: string
          description: Success message
        access:
          type: string
          description: JWT access token
        refresh:
          type: string
          description: JWT refresh token
        user:
          allOf:
          - $ref: '#/components/schemas/User'
          description: User details
      required:
      - access
      - message
      - refresh
      - user
    Message:
      type: object
      description: Serializer for chat messages
      properties:
        id:
          type: integer
          readOnly: true
        chat:
          type: integer
        sender:
          allOf:
          - $ref: '#/components/schemas/ChatUser'
          readOnly: true
        message_type:
          $ref: '#/components/schemas/MessageTypeEnum'
        text_content:
          type: string
          nullable: true
        image_url:
          type: string
          nullable: true
          description: S3 object key for image
          maxLength: 500
        image_temp_url:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        is_read:
          type: boolean
          readOnly: true
        read_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
      required:
      - chat
      - created_at
      - id
      - image_temp_url
      - is_read
      - read_at
      - sender
    MessageRequest:
      type: object
      description: Serializer for chat messages
      properties:
        chat:
          type: integer
        message_type:
          $ref: '#/components/schemas/MessageTypeEnum'
        text_content:
          type: string
          nullable: true
        image_url:
          type: string
          nullable: true
          description: S3 object key for image
          maxLength: 500
      required:
      - chat
    MessageTypeEnum:
      enum:
      - text
      - image
      type: string
      description: |-
        * `text` - Text
        * `image` - Image
    MinimalProductReview:
      type: object
      description: Minimal review info for product detail - no sensitive user data
      properties:
        id:
          type: integer
          readOnly: true
        reviewer:
          allOf:
          - $ref: '#/components/schemas/MinimalSeller'
          readOnly: true
        rating:
          type: integer
          maximum: 5
          minimum: 1
        title:
          type: string
          maxLength: 200
        comment:
          type: string
        is_verified_purchase:
          type: boolean
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - is_verified_purchase
      - rating
      - reviewer
    MinimalSeller:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
      required:
      - id
      - username
    NullEnum:
      enum:
      - null
    OrderDetailResponse:
      type: object
      description: Detailed order response
      properties:
        id:
          type: string
          format: uuid
          description: Order UUID
        status:
          allOf:
          - $ref: '#/components/schemas/StatusEnum'
          description: |-
            Order status

            * `pending_payment` - pending_payment
            * `payment_confirmed` - payment_confirmed
            * `awaiting_shipment` - awaiting_shipment
            * `shipped` - shipped
            * `delivered` - delivered
            * `cancelled` - cancelled
            * `refunded` - refunded
        payment_status:
          allOf:
          - $ref: '#/components/schemas/PaymentStatusEnum'
          description: |-
            Payment status

            * `pending` - pending
            * `paid` - paid
            * `failed` - failed
            * `refunded` - refunded
        buyer:
          type: object
          additionalProperties: {}
          description: Buyer information
        items:
          type: array
          items:
            $ref: '#/components/schemas/OrderItem'
          description: Order items
        subtotal:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Items subtotal
        shipping_cost:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Shipping cost
        tax_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Tax amount
        discount_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Discount applied
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Final total
        shipping_address:
          allOf:
          - $ref: '#/components/schemas/ShippingAddress'
          description: Delivery address
        buyer_notes:
          type: string
          description: Buyer notes
        tracking_number:
          type: string
          nullable: true
          description: Shipment tracking number
        shipping_carrier:
          type: string
          nullable: true
          description: Shipping carrier name
        shipped_at:
          type: string
          format: date-time
          nullable: true
          description: Shipment timestamp
        delivered_at:
          type: string
          format: date-time
          nullable: true
          description: Delivery timestamp
        created_at:
          type: string
          format: date-time
          description: Order creation timestamp
      required:
      - buyer
      - created_at
      - discount_amount
      - id
      - items
      - payment_status
      - shipping_address
      - shipping_cost
      - status
      - subtotal
      - tax_amount
      - total_amount
    OrderItem:
      type: object
      description: Single order item
      properties:
        id:
          type: integer
          description: Order item ID
        product:
          type: object
          additionalProperties: {}
          description: Product snapshot at time of order
        quantity:
          type: integer
          description: Quantity ordered
        unit_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Price per unit at time of order
        total_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Total for this item
        product_name:
          type: string
          description: Product name (snapshot)
        product_image:
          type: string
          format: uri
          description: Product image URL (snapshot)
      required:
      - id
      - product
      - product_image
      - product_name
      - quantity
      - total_price
      - unit_price
    OrderListItem:
      type: object
      description: Order in list view (summary)
      properties:
        id:
          type: string
          format: uuid
          description: Order UUID
        status:
          allOf:
          - $ref: '#/components/schemas/StatusEnum'
          description: |-
            Order status

            * `pending_payment` - pending_payment
            * `payment_confirmed` - payment_confirmed
            * `awaiting_shipment` - awaiting_shipment
            * `shipped` - shipped
            * `delivered` - delivered
            * `cancelled` - cancelled
            * `refunded` - refunded
        payment_status:
          allOf:
          - $ref: '#/components/schemas/PaymentStatusEnum'
          description: |-
            Payment status

            * `pending` - pending
            * `paid` - paid
            * `failed` - failed
            * `refunded` - refunded
        total_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          description: Order total
        created_at:
          type: string
          format: date-time
          description: Order creation timestamp
        item_count:
          type: integer
          description: Number of items in order
      required:
      - created_at
      - id
      - item_count
      - payment_status
      - status
      - total_amount
    OrderListResponse:
      type: object
      description: Paginated order list response
      properties:
        count:
          type: integer
          description: Total number of orders
        page:
          type: integer
          description: Current page
        page_size:
          type: integer
          description: Items per page
        num_pages:
          type: integer
          description: Total pages
        results:
          type: array
          items:
            $ref: '#/components/schemas/OrderListItem'
          description: Order list
      required:
      - count
      - num_pages
      - page
      - page_size
      - results
    PaginatedMessageList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Message'
    PatchedProductARModelDownloadRequest:
      type: object
      description: Serializer for tracking user downloads of AR models.
      properties:
        product_id:
          type: string
          format: uuid
          writeOnly: true
        local_path:
          type: string
          maxLength: 1024
        file_name:
          type: string
          maxLength: 255
        file_size:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
          nullable: true
        platform:
          type: string
          maxLength: 64
        app_version:
          type: string
          maxLength: 64
        device_info:
          type: string
          maxLength: 255
    PatchedProductCreateUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          minLength: 1
        short_description:
          type: string
          maxLength: 300
        category:
          type: integer
          nullable: true
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        original_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          nullable: true
        stock_quantity:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
        condition:
          $ref: '#/components/schemas/ConditionEnum'
        brand:
          type: string
          maxLength: 100
        model:
          type: string
          maxLength: 100
        weight:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Weight in kg
        dimensions_length:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Length in cm
        dimensions_width:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Width in cm
        dimensions_height:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Height in cm
        colors:
          type: string
        materials:
          type: string
          description: Materials used
        tags:
          type: string
        is_digital:
          type: boolean
        image_data:
          type: array
          items:
            $ref: '#/components/schemas/ImageDataRequest'
          writeOnly: true
          description: Array of base64-encoded images with metadata
    PatchedProfileRequest:
      type: object
      properties:
        bio:
          type: string
          nullable: true
          maxLength: 500
        location:
          type: string
          nullable: true
          maxLength: 100
        birth_date:
          type: string
          format: date
          nullable: true
        gender:
          nullable: true
          oneOf:
          - $ref: '#/components/schemas/GenderEnum'
          - $ref: '#/components/schemas/BlankEnum'
          - $ref: '#/components/schemas/NullEnum'
        pronouns:
          type: string
          nullable: true
          maxLength: 50
        phone_number:
          type: string
          nullable: true
          maxLength: 20
        country_code:
          type: string
          nullable: true
          maxLength: 5
        website:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        job_title:
          type: string
          nullable: true
          maxLength: 100
        company:
          type: string
          nullable: true
          maxLength: 100
        street_address:
          type: string
          nullable: true
          maxLength: 255
        city:
          type: string
          nullable: true
          maxLength: 100
        state_province:
          type: string
          nullable: true
          maxLength: 100
        country:
          type: string
          nullable: true
          maxLength: 100
        postal_code:
          type: string
          nullable: true
          maxLength: 20
        instagram_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        twitter_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        linkedin_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        facebook_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        timezone:
          type: string
          nullable: true
          maxLength: 50
        language_preference:
          type: string
          nullable: true
          maxLength: 10
        currency_preference:
          type: string
          nullable: true
          maxLength: 3
        account_type:
          $ref: '#/components/schemas/AccountTypeEnum'
        profile_visibility:
          $ref: '#/components/schemas/ProfileVisibilityEnum'
        profile_picture_url:
          type: string
          nullable: true
          description: S3 object key for profile picture
          maxLength: 500
        marketing_emails_enabled:
          type: boolean
        newsletter_enabled:
          type: boolean
        notifications_enabled:
          type: boolean
    PatchedUpdateCartRequestRequest:
      type: object
      description: Request body for updating cart item
      properties:
        product_id:
          type: string
          format: uuid
          description: Product UUID to update
        quantity:
          type: integer
          minimum: 0
          description: New quantity (0 to remove item)
    PaymentStatusEnum:
      enum:
      - pending
      - paid
      - failed
      - refunded
      type: string
      description: |-
        * `pending` - pending
        * `paid` - paid
        * `failed` - failed
        * `refunded` - refunded
    ProductARModel:
      type: object
      description: Read-only serializer exposing metadata about a product 3D model.
      properties:
        id:
          type: integer
          readOnly: true
        product_id:
          type: string
          format: uuid
          readOnly: true
        s3_key:
          type: string
          readOnly: true
        s3_bucket:
          type: string
          readOnly: true
        original_filename:
          type: string
          readOnly: true
        file_size:
          type: integer
          readOnly: true
          nullable: true
        content_type:
          type: string
          readOnly: true
        uploaded_by:
          type: string
          format: uuid
          readOnly: true
          nullable: true
        uploaded_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        last_download_requested_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        download_url:
          type: string
          readOnly: true
      required:
      - content_type
      - download_url
      - file_size
      - id
      - last_download_requested_at
      - original_filename
      - product_id
      - s3_bucket
      - s3_key
      - updated_at
      - uploaded_at
      - uploaded_by
    ProductARModelDownload:
      type: object
      description: Serializer for tracking user downloads of AR models.
      properties:
        id:
          type: integer
          readOnly: true
        product_model_id:
          type: integer
          readOnly: true
        product:
          type: string
          readOnly: true
        local_path:
          type: string
          maxLength: 1024
        file_name:
          type: string
          maxLength: 255
        file_size:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
          nullable: true
        platform:
          type: string
          maxLength: 64
        app_version:
          type: string
          maxLength: 64
        device_info:
          type: string
          maxLength: 255
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - product
      - product_model_id
      - updated_at
    ProductARModelDownloadRequest:
      type: object
      description: Serializer for tracking user downloads of AR models.
      properties:
        product_id:
          type: string
          format: uuid
          writeOnly: true
        local_path:
          type: string
          maxLength: 1024
        file_name:
          type: string
          maxLength: 255
        file_size:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
          nullable: true
        platform:
          type: string
          maxLength: 64
        app_version:
          type: string
          maxLength: 64
        device_info:
          type: string
          maxLength: 255
    ProductCreateUpdateRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          minLength: 1
        short_description:
          type: string
          maxLength: 300
        category:
          type: integer
          nullable: true
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        original_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          nullable: true
        stock_quantity:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
        condition:
          $ref: '#/components/schemas/ConditionEnum'
        brand:
          type: string
          maxLength: 100
        model:
          type: string
          maxLength: 100
        weight:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Weight in kg
        dimensions_length:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Length in cm
        dimensions_width:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Width in cm
        dimensions_height:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Height in cm
        colors:
          type: string
        materials:
          type: string
          description: Materials used
        tags:
          type: string
        is_digital:
          type: boolean
        image_data:
          type: array
          items:
            $ref: '#/components/schemas/ImageDataRequest'
          writeOnly: true
          description: Array of base64-encoded images with metadata
      required:
      - description
      - name
      - price
    ProductDetail:
      type: object
      description: Simplified product detail serializer with minimal nested data
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          maxLength: 200
        slug:
          type: string
          readOnly: true
          pattern: ^[-a-zA-Z0-9_]+$
        description:
          type: string
        short_description:
          type: string
          maxLength: 300
        seller:
          allOf:
          - $ref: '#/components/schemas/ProductDetailSeller'
          readOnly: true
        category:
          allOf:
          - $ref: '#/components/schemas/ProductDetailCategory'
          readOnly: true
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        original_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          nullable: true
        stock_quantity:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
        condition:
          $ref: '#/components/schemas/ConditionEnum'
        brand:
          type: string
          maxLength: 100
        model:
          type: string
          maxLength: 100
        weight:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Weight in kg
        dimensions_length:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Length in cm
        dimensions_width:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Width in cm
        dimensions_height:
          type: string
          format: decimal
          pattern: ^-?\d{0,6}(?:\.\d{0,2})?$
          nullable: true
          description: Height in cm
        colors:
          description: Available colors
        materials:
          type: string
          description: Materials used
        tags:
          description: Product tags
        is_featured:
          type: boolean
        is_digital:
          type: boolean
        images:
          type: array
          items:
            $ref: '#/components/schemas/ProductDetailImage'
          readOnly: true
        reviews:
          type: array
          items:
            $ref: '#/components/schemas/MinimalProductReview'
          readOnly: true
        average_rating:
          type: string
          readOnly: true
        is_in_stock:
          type: string
          readOnly: true
        is_on_sale:
          type: string
          readOnly: true
        discount_percentage:
          type: string
          readOnly: true
        is_favorited:
          type: string
          readOnly: true
        has_ar_model:
          type: string
          readOnly: true
        view_count:
          type: integer
          readOnly: true
        click_count:
          type: integer
          readOnly: true
        favorite_count:
          type: integer
          readOnly: true
      required:
      - average_rating
      - category
      - click_count
      - description
      - discount_percentage
      - favorite_count
      - has_ar_model
      - id
      - images
      - is_favorited
      - is_in_stock
      - is_on_sale
      - name
      - price
      - reviews
      - seller
      - slug
      - view_count
    ProductDetailCategory:
      type: object
      description: Minimal category info for product detail endpoint
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 100
        slug:
          type: string
          readOnly: true
          pattern: ^[-a-zA-Z0-9_]+$
        description:
          type: string
      required:
      - id
      - name
      - slug
    ProductDetailImage:
      type: object
      description: Minimal image info for product detail endpoint
      properties:
        id:
          type: integer
          readOnly: true
        image:
          type: string
          readOnly: true
        alt_text:
          type: string
          maxLength: 200
        is_primary:
          type: boolean
        order:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
        url:
          type: string
          readOnly: true
      required:
      - id
      - image
      - url
    ProductDetailSeller:
      type: object
      description: Minimal seller info for product detail endpoint
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        username:
          type: string
          readOnly: true
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
        seller_rating:
          type: string
          readOnly: true
      required:
      - id
      - seller_rating
      - username
    ProductFavorite:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        product:
          allOf:
          - $ref: '#/components/schemas/ProductList'
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - product
    ProductImage:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        alt_text:
          type: string
          maxLength: 200
        is_primary:
          type: boolean
        order:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
        presigned_url:
          type: string
          readOnly: true
        proxy_url:
          type: string
          readOnly: true
        image_url:
          type: string
          readOnly: true
        s3_key:
          type: string
          readOnly: true
          description: S3 object key for the image
        original_filename:
          type: string
          readOnly: true
          description: Original filename
        file_size:
          type: integer
          readOnly: true
          nullable: true
          description: File size in bytes
        content_type:
          type: string
          readOnly: true
          description: MIME type
      required:
      - content_type
      - file_size
      - id
      - image_url
      - original_filename
      - presigned_url
      - proxy_url
      - s3_key
    ProductImageRequest:
      type: object
      properties:
        alt_text:
          type: string
          maxLength: 200
        is_primary:
          type: boolean
        order:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
    ProductList:
      type: object
      description: Minimal product serializer for list/search - just the essentials
        for product cards
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          maxLength: 200
        slug:
          type: string
          readOnly: true
          pattern: ^[-a-zA-Z0-9_]+$
        short_description:
          type: string
          maxLength: 300
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        original_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          nullable: true
        stock_quantity:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
        condition:
          $ref: '#/components/schemas/ConditionEnum'
        brand:
          type: string
          maxLength: 100
        primary_image:
          type: string
          readOnly: true
        average_rating:
          type: string
          readOnly: true
        review_count:
          type: string
          readOnly: true
        is_in_stock:
          type: string
          readOnly: true
        is_on_sale:
          type: string
          readOnly: true
        discount_percentage:
          type: string
          readOnly: true
        is_favorited:
          type: string
          readOnly: true
      required:
      - average_rating
      - discount_percentage
      - id
      - is_favorited
      - is_in_stock
      - is_on_sale
      - name
      - price
      - primary_image
      - review_count
      - slug
    ProductListPaginatedResponse:
      type: object
      properties:
        count:
          type: integer
        page:
          type: integer
        page_size:
          type: integer
        num_pages:
          type: integer
        has_next:
          type: boolean
        has_previous:
          type: boolean
        results:
          type: array
          items:
            $ref: '#/components/schemas/ProductList'
      required:
      - count
      - has_next
      - has_previous
      - num_pages
      - page
      - page_size
      - results
    ProductListRequest:
      type: object
      description: Minimal product serializer for list/search - just the essentials
        for product cards
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        short_description:
          type: string
          maxLength: 300
        price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        original_price:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          nullable: true
        stock_quantity:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
        condition:
          $ref: '#/components/schemas/ConditionEnum'
        brand:
          type: string
          maxLength: 100
      required:
      - name
      - price
    ProductMetrics:
      type: object
      properties:
        total_views:
          type: integer
          readOnly: true
        total_clicks:
          type: integer
          readOnly: true
        total_favorites:
          type: integer
          readOnly: true
        total_cart_additions:
          type: integer
          readOnly: true
        total_sales:
          type: integer
          readOnly: true
        total_revenue:
          type: string
          format: decimal
          pattern: ^-?\d{0,13}(?:\.\d{0,2})?$
          readOnly: true
        view_to_click_rate:
          type: string
          readOnly: true
        click_to_cart_rate:
          type: string
          readOnly: true
        cart_to_purchase_rate:
          type: string
          readOnly: true
        last_updated:
          type: string
          format: date-time
          readOnly: true
      required:
      - cart_to_purchase_rate
      - click_to_cart_rate
      - last_updated
      - total_cart_additions
      - total_clicks
      - total_favorites
      - total_revenue
      - total_sales
      - total_views
      - view_to_click_rate
    ProductSearchPaginatedResponse:
      type: object
      properties:
        count:
          type: integer
        page:
          type: integer
        page_size:
          type: integer
        num_pages:
          type: integer
        has_next:
          type: boolean
        has_previous:
          type: boolean
        results:
          type: array
          items:
            $ref: '#/components/schemas/ProductList'
      required:
      - count
      - has_next
      - has_previous
      - num_pages
      - page
      - page_size
      - results
    Profile:
      type: object
      properties:
        bio:
          type: string
          nullable: true
          maxLength: 500
        location:
          type: string
          nullable: true
          maxLength: 100
        birth_date:
          type: string
          format: date
          nullable: true
        gender:
          nullable: true
          oneOf:
          - $ref: '#/components/schemas/GenderEnum'
          - $ref: '#/components/schemas/BlankEnum'
          - $ref: '#/components/schemas/NullEnum'
        pronouns:
          type: string
          nullable: true
          maxLength: 50
        phone_number:
          type: string
          nullable: true
          maxLength: 20
        country_code:
          type: string
          nullable: true
          maxLength: 5
        website:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        job_title:
          type: string
          nullable: true
          maxLength: 100
        company:
          type: string
          nullable: true
          maxLength: 100
        street_address:
          type: string
          nullable: true
          maxLength: 255
        city:
          type: string
          nullable: true
          maxLength: 100
        state_province:
          type: string
          nullable: true
          maxLength: 100
        country:
          type: string
          nullable: true
          maxLength: 100
        postal_code:
          type: string
          nullable: true
          maxLength: 20
        instagram_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        twitter_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        linkedin_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        facebook_url:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        timezone:
          type: string
          nullable: true
          maxLength: 50
        language_preference:
          type: string
          nullable: true
          maxLength: 10
        currency_preference:
          type: string
          nullable: true
          maxLength: 3
        account_type:
          $ref: '#/components/schemas/AccountTypeEnum'
        profile_visibility:
          $ref: '#/components/schemas/ProfileVisibilityEnum'
        is_verified:
          type: boolean
          readOnly: true
        is_verified_seller:
          type: boolean
          readOnly: true
        seller_type:
          type: string
          readOnly: true
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        profile_completion_percentage:
          type: integer
          maximum: 2147483647
          minimum: -2147483648
          readOnly: true
        profile_picture_url:
          type: string
          nullable: true
          description: S3 object key for profile picture
          maxLength: 500
        profile_picture_temp_url:
          type: string
          readOnly: true
        marketing_emails_enabled:
          type: boolean
        newsletter_enabled:
          type: boolean
        notifications_enabled:
          type: boolean
      required:
      - created_at
      - is_verified
      - is_verified_seller
      - profile_completion_percentage
      - profile_picture_temp_url
      - seller_type
      - updated_at
    ProfilePictureDeleteResponse:
      type: object
      description: Response for profile picture deletion
      properties:
        message:
          type: string
          description: Success message
      required:
      - message
    ProfilePictureUploadResponse:
      type: object
      description: Response for profile picture upload
      properties:
        message:
          type: string
          description: Success message
        profile_picture_url:
          type: string
          description: S3 key/path of uploaded image
        profile_picture_temp_url:
          type: string
          format: uri
          description: Temporary presigned URL for immediate display
        size:
          type: integer
          description: File size in bytes
        content_type:
          type: string
          description: MIME type of uploaded file
      required:
      - content_type
      - profile_picture_temp_url
      - profile_picture_url
      - size
    ProfileVisibilityEnum:
      enum:
      - public
      - private
      - friends_only
      type: string
      description: |-
        * `public` - Public
        * `private` - Private
        * `friends_only` - Friends Only
    PublicProfile:
      type: object
      properties:
        bio:
          type: string
          nullable: true
          maxLength: 500
        location:
          type: string
          nullable: true
          maxLength: 100
        website:
          type: string
          format: uri
          nullable: true
          maxLength: 200
        profile_picture_temp_url:
          type: string
          readOnly: true
      required:
      - profile_picture_temp_url
    PublicUser:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        first_name:
          type: string
          maxLength: 30
        last_name:
          type: string
          maxLength: 30
        avatar:
          type: string
          format: uri
          nullable: true
        date_joined:
          type: string
          format: date-time
          readOnly: true
        profile:
          allOf:
          - $ref: '#/components/schemas/PublicProfile'
          readOnly: true
        bio:
          type: string
          readOnly: true
        location:
          type: string
          readOnly: true
        website:
          type: string
          readOnly: true
        job_title:
          type: string
          readOnly: true
        company:
          type: string
          readOnly: true
        instagram_url:
          type: string
          readOnly: true
        twitter_url:
          type: string
          readOnly: true
        linkedin_url:
          type: string
          readOnly: true
        facebook_url:
          type: string
          readOnly: true
        is_verified_seller:
          type: boolean
          readOnly: true
        seller_type:
          type: string
          readOnly: true
      required:
      - bio
      - company
      - date_joined
      - facebook_url
      - id
      - instagram_url
      - is_verified_seller
      - job_title
      - linkedin_url
      - location
      - profile
      - seller_type
      - twitter_url
      - username
      - website
    PurposeEnum:
      enum:
      - enable_2fa
      - disable_2fa
      type: string
      description: |-
        * `enable_2fa` - Enable 2FA
        * `disable_2fa` - Disable 2FA
    RegisterResponse:
      type: object
      description: Response for successful registration
      properties:
        message:
          type: string
          description: Success message with instructions
        user:
          allOf:
          - $ref: '#/components/schemas/User'
          description: Newly registered user details
      required:
      - message
      - user
    ResendVerificationRequestRequest:
      type: object
      description: Request body for resending verification email
      properties:
        email:
          type: string
          format: email
          minLength: 1
          description: Email address to resend verification to
      required:
      - email
    ResendVerificationResponse:
      type: object
      description: Response for resending verification email
      properties:
        message:
          type: string
          description: Status message
      required:
      - message
    ReviewResponse:
      type: object
      description: Review response
      properties:
        id:
          type: integer
          description: Review ID
        product:
          type: object
          additionalProperties: {}
          description: Product summary (id, name)
        reviewer:
          type: object
          additionalProperties: {}
          description: Reviewer info (id, username)
        rating:
          type: integer
          description: Rating (1-5 stars)
        title:
          type: string
          description: Review title
        comment:
          type: string
          description: Review text
        verified_purchase:
          type: boolean
          description: Whether reviewer purchased the product
        created_at:
          type: string
          format: date-time
          description: Review creation timestamp
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
      required:
      - comment
      - created_at
      - id
      - product
      - rating
      - reviewer
      - title
      - updated_at
      - verified_purchase
    RoleEnum:
      enum:
      - customer
      - seller
      - admin
      type: string
      description: |-
        * `customer` - Customer
        * `seller` - Seller
        * `admin` - Admin
    SellerApplicationAdminActionRequestRequest:
      type: object
      description: Request body for admin approve/reject action
      properties:
        action:
          allOf:
          - $ref: '#/components/schemas/ActionEnum'
          description: |-
            Action to perform: approve or reject

            * `approve` - approve
            * `reject` - reject
        reason:
          type: string
          description: Reason for rejection (required if action=reject)
      required:
      - action
    SellerApplicationAdminActionResponse:
      type: object
      description: Response for admin approve/reject action
      properties:
        message:
          type: string
          description: Success message
        user_id:
          type: string
          description: ID of the user
        user_email:
          type: string
          format: email
          description: Email of the user
      required:
      - message
    SellerApplicationImageRequest:
      type: object
      description: Serializer for seller application images
      properties:
        image:
          type: string
          format: binary
        image_type:
          allOf:
          - $ref: '#/components/schemas/ImageTypeEnum'
          description: |-
            Type of business image

            * `workshop` - Workshop Photo
            * `inventory` - Inventory Photo
            * `product_sample` - Product Sample
            * `business_setup` - Business Setup
            * `tools_equipment` - Tools & Equipment
            * `other` - Other
        description:
          type: string
          description: Description of what this image shows
          maxLength: 200
        order:
          type: integer
          maximum: 4294967295
          minimum: 0
          format: int64
      required:
      - image
    SellerApplicationRequest:
      type: object
      description: Serializer for seller applications
      properties:
        user:
          type: string
          format: uuid
        business_name:
          type: string
          minLength: 1
          maxLength: 200
        seller_type:
          $ref: '#/components/schemas/SellerTypeEnum'
        motivation:
          type: string
          minLength: 1
          description: Why they want to sell on Designia
        portfolio_url:
          type: string
          format: uri
          minLength: 1
          description: Portfolio or website link
          maxLength: 200
        social_media_url:
          type: string
          format: uri
          description: Social media link (optional)
          maxLength: 200
        uploaded_images:
          type: array
          items:
            type: string
            format: binary
          writeOnly: true
        image_descriptions:
          type: array
          items:
            type: string
            maxLength: 200
          writeOnly: true
        image_types:
          type: array
          items:
            $ref: '#/components/schemas/ImageTypesEnum'
          writeOnly: true
      required:
      - business_name
      - motivation
      - portfolio_url
      - seller_type
      - user
    SellerApplicationStatusResponse:
      type: object
      description: Response for seller application status check
      properties:
        has_application:
          type: boolean
          description: Whether user has an application
        is_seller:
          type: boolean
          description: Whether user is already a seller
        status:
          type: string
          nullable: true
          description: 'Application status: pending, approved, rejected, or none'
        application_id:
          type: integer
          nullable: true
          description: Application ID if exists
        submitted_at:
          type: string
          format: date-time
          nullable: true
          description: Submission timestamp
        admin_notes:
          type: string
          nullable: true
          description: Admin notes/feedback
        rejection_reason:
          type: string
          nullable: true
          description: Reason for rejection if rejected
      required:
      - admin_notes
      - application_id
      - has_application
      - is_seller
      - rejection_reason
      - status
      - submitted_at
    SellerApplicationSubmitResponse:
      type: object
      description: Response for seller application submission
      properties:
        message:
          type: string
          description: Success message
        application_id:
          type: integer
          description: ID of created/updated application
        images_uploaded:
          type: integer
          description: Number of workshop images uploaded
      required:
      - application_id
      - images_uploaded
      - message
    SellerTypeEnum:
      enum:
      - manufacturer
      - designer
      - restorer
      - retailer
      - artisan
      type: string
      description: |-
        * `manufacturer` - Manufacturer
        * `designer` - Furniture Designer
        * `restorer` - Furniture Restorer/Fixer
        * `retailer` - Retailer/Curator
        * `artisan` - Artisan/Craftsman
    ShippingAddress:
      type: object
      description: Shipping address structure
      properties:
        street:
          type: string
          description: Street address
        city:
          type: string
          description: City
        state:
          type: string
          description: State/Province
        postal_code:
          type: string
          description: Postal/ZIP code
        country:
          type: string
          description: Country
      required:
      - city
      - country
      - postal_code
      - state
      - street
    ShippingAddressRequest:
      type: object
      description: Shipping address structure
      properties:
        street:
          type: string
          minLength: 1
          description: Street address
        city:
          type: string
          minLength: 1
          description: City
        state:
          type: string
          minLength: 1
          description: State/Province
        postal_code:
          type: string
          minLength: 1
          description: Postal/ZIP code
        country:
          type: string
          minLength: 1
          description: Country
      required:
      - city
      - country
      - postal_code
      - state
      - street
    StatusEnum:
      enum:
      - pending_payment
      - payment_confirmed
      - awaiting_shipment
      - shipped
      - delivered
      - cancelled
      - refunded
      type: string
      description: |-
        * `pending_payment` - pending_payment
        * `payment_confirmed` - payment_confirmed
        * `awaiting_shipment` - awaiting_shipment
        * `shipped` - shipped
        * `delivered` - delivered
        * `cancelled` - cancelled
        * `refunded` - refunded
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
        refresh:
          type: string
      required:
      - access
      - refresh
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          minLength: 1
      required:
      - refresh
    TwoFactorCodeRequestRequest:
      type: object
      description: Serializer for requesting a 2FA code
      properties:
        purpose:
          $ref: '#/components/schemas/PurposeEnum'
      required:
      - purpose
    TwoFactorConfirmRequest:
      type: object
      description: Serializer for confirming 2FA action (enable/disable)
      properties:
        code:
          type: string
          minLength: 6
          maxLength: 6
      required:
      - code
    TwoFactorVerifyRequestRequest:
      type: object
      description: Request body for 2FA verification during login
      properties:
        user_id:
          type: string
          minLength: 1
          description: User ID from initial login response
        code:
          type: string
          minLength: 6
          description: 6-digit 2FA code sent to email
          maxLength: 6
      required:
      - code
      - user_id
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        username:
          type: string
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          readOnly: true
        first_name:
          type: string
          maxLength: 30
        last_name:
          type: string
          maxLength: 30
        date_joined:
          type: string
          format: date-time
          readOnly: true
        avatar:
          type: string
          format: uri
          nullable: true
        is_email_verified:
          type: boolean
          readOnly: true
        two_factor_enabled:
          type: boolean
          readOnly: true
        is_oauth_only_user:
          type: string
          readOnly: true
        language:
          $ref: '#/components/schemas/LanguageEnum'
        role:
          allOf:
          - $ref: '#/components/schemas/RoleEnum'
          readOnly: true
        profile:
          $ref: '#/components/schemas/Profile'
      required:
      - date_joined
      - email
      - id
      - is_email_verified
      - is_oauth_only_user
      - profile
      - role
      - two_factor_enabled
      - username
    UserRegistrationRequest:
      type: object
      properties:
        username:
          type: string
          minLength: 1
          description: Required. 150 characters or fewer. Letters, digits and @/./+/-/_
            only.
          pattern: ^[\w.@+-]+$
          maxLength: 150
        email:
          type: string
          format: email
          minLength: 1
          maxLength: 254
        password:
          type: string
          writeOnly: true
          minLength: 1
        password_confirm:
          type: string
          writeOnly: true
          minLength: 1
        first_name:
          type: string
          maxLength: 30
        last_name:
          type: string
          maxLength: 30
      required:
      - email
      - password
      - password_confirm
      - username
    VerifyEmailRequestRequest:
      type: object
      description: Request body for email verification
      properties:
        token:
          type: string
          minLength: 1
          description: Email verification token from email link
      required:
      - token
    VerifyEmailResponse:
      type: object
      description: Response for email verification
      properties:
        message:
          type: string
          description: Success message
      required:
      - message
  securitySchemes:
    Bearer:
      type: http
      scheme: bearer
      bearerFormat: JWT
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
